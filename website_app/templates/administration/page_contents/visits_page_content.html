{% set page_title="Visits" %}
{% set page_icon="fas fa-chart-line" %}
{% set page_links = "visits_pagelinks.html" %}
{% set next_page_url=url_for("administration.usersadmin",action_tab='users') %}
{% set next_page_caption="Users Admin" %}

<div class="container-fluid">
    <div class="row">
        <div class="col-xs xborder xborder-info m-0 p-0">
            <div class="container">
                {% if not is_tab_form %}
                <div class="d-flex flex-row justify-content-end p-0" style="transform: translate(0%, 0%);">
                    {% include include_files(page_links,type='PAGE',module=active_module,language=CURRENT_LANGUAGE) ignore missing %}
                    {% if next_page_url %}
                    {% include include_files('button_next.html',type='COMPONENT',module=active_module,language=CURRENT_LANGUAGE) ignore missing %}
                    {% endif %}
                </div>
                <div class="modal-header align-items-center pr-0" style="margin-top:-1.5em">
                    {% include include_files('page_title.html',type='COMPONENT',module=active_module,language=CURRENT_LANGUAGE) ignore missing %}
                    {% include include_files('page_close_icon.html',type='COMPONENT',module=active_module,language=CURRENT_LANGUAGE) ignore missing %}
                </div>
                {% endif %}

                <div class="d-flex flex-row m-0 p-0 mt-1 align-items-center justify-content-between">
                    <div class="d-flex mr-1 flex-grow-1">
                        {{ visitsPagination.links }}
                    </div>
                    <div class="ml-2" style="">
                        {{ visitsPagination.info }}
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover table-striped table-borderless mb-0 pb-0" id="visitstable">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">DT</th>
                                <th scope="col">IP</th>
                                <th scope="col" colspan="2">visit point</th>
                                <th scope="col">pages</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for visit in visits %}
                            <tr id={{ visit.id }}>
                                <th scope="row">{{ visit.visitNumber }}</th>
                                <td>{{ visit.visitDT }}</td>
                                <td> {{ visit.ip }} </td>
                                <td> {{ visit.visitpoint.country_name }} </td>
                                <td> {{ visit.visitpoint.city }} </td>
                                <td> {{ visit.pagesVisitedCount }} </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="d-flex m-0 p-0 align-items-center justify-content-end">
                    {{ visitsPagination.links }}
                </div>
            </div>
        </div>
    <!--d-none d-lg-block : hide on screens smaller than large-->
    <div class="col-xs d-none d-xl-block">
            <img class="img-fluid xborder xborder-danger" src='{{graph1}}'></img>
        </div>
    </div>
    <!--d-lg-none : hide on screens wider than large-->
    <div class="row d-xl-none">
        <div class="col-xs ">
            <img class="img-fluid " src='{{graph1}}'></img>
        </div>
    </div>
    <div class="row">
        <div class="col-xs xborder xborder-info">
            <img class="img-fluid xborder xborder-danger" src='{{graph2}}'></img>
        </div>
    </div>
    <div class="row">
        <div class="col-xs xborder xborder-info">
            <img class="img-fluid xborder xborder-danger" src='{{graph3}}'></img>
        </div>
    </div>
    <div class="row">
        <div class="col-xs xborder xborder-info">
            <img class="img-fluid xborder xborder-danger" src='{{graph4}}'></img>
        </div>
    </div>
</div>